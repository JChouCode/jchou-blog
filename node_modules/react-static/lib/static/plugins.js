"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.validatePlugin = void 0;

var _utils = require("../utils");

var supportedHooks = ['afterGetConfig', 'beforePrepareBrowserPlugins', 'afterPrepareBrowserPlugins', 'beforePrepareRoutes', 'getRoutes', 'normalizeRoute', 'afterPrepareRoutes', 'webpack', 'afterBundle', 'afterDevServerStart', 'beforeRenderToElement', 'beforeRenderToHtml', 'htmlProps', 'headElements', 'beforeHtmlToDocument', 'beforeDocumentToFile', 'afterExport'];

var validatePlugin = function validatePlugin(plugin) {
  var hookKeys = Object.keys(plugin.hooks);
  var badKeys = hookKeys.filter(function (key) {
    return !supportedHooks.includes(key);
  });

  if (badKeys.length) {
    throw new Error("Unknown plugin hooks: \"".concat(badKeys.join(', '), "\" found in plugin: ").concat(plugin.location));
  }
};

exports.validatePlugin = validatePlugin;
var _default = {
  afterGetConfig: function afterGetConfig(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterGetConfig');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(state);
  },
  beforePrepareBrowserPlugins: function beforePrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  afterPrepareBrowserPlugins: function afterPrepareBrowserPlugins(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareBrowserPlugins');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforePrepareRoutes: function beforePrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforePrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  getRoutes: function getRoutes(routes, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'getRoutes');
    return (0, _utils.reduceHooks)(hooks)(routes, state);
  },
  normalizeRoute: function normalizeRoute(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'normalizeRoute');
    return function (route) {
      return (0, _utils.reduceHooks)(hooks, {
        sync: true
      })(route, state);
    };
  },
  afterPrepareRoutes: function afterPrepareRoutes(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterPrepareRoutes');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  webpack: function webpack(config, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'webpack');
    return (0, _utils.reduceHooks)(hooks, {
      sync: true
    })(config, state);
  },
  afterBundle: function afterBundle(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterBundle');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  afterDevServerStart: function afterDevServerStart(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterDevServerStart');
    return (0, _utils.reduceHooks)(hooks)(state);
  },
  beforeRenderToElement: function beforeRenderToElement(Comp, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToElement');
    return (0, _utils.reduceHooks)(hooks)(Comp, state);
  },
  beforeRenderToHtml: function beforeRenderToHtml(element, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeRenderToHtml');
    return (0, _utils.reduceHooks)(hooks)(element, state);
  },
  htmlProps: function htmlProps(props, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'htmlProps');
    return (0, _utils.reduceHooks)(hooks)(props, state);
  },
  headElements: function headElements(elements, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'headElements');
    return (0, _utils.reduceHooks)(hooks)(elements, state);
  },
  beforeHtmlToDocument: function beforeHtmlToDocument(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeHtmlToDocument');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  beforeDocumentToFile: function beforeDocumentToFile(html, state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'beforeDocumentToFile');
    return (0, _utils.reduceHooks)(hooks)(html, state);
  },
  afterExport: function afterExport(state) {
    var hooks = (0, _utils.getHooks)(state.plugins, 'afterExport');
    return (0, _utils.reduceHooks)(hooks)(state);
  }
};
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdGF0aWMvcGx1Z2lucy5qcyJdLCJuYW1lcyI6WyJzdXBwb3J0ZWRIb29rcyIsInZhbGlkYXRlUGx1Z2luIiwicGx1Z2luIiwiaG9va0tleXMiLCJPYmplY3QiLCJrZXlzIiwiaG9va3MiLCJiYWRLZXlzIiwiZmlsdGVyIiwia2V5IiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJFcnJvciIsImpvaW4iLCJsb2NhdGlvbiIsImFmdGVyR2V0Q29uZmlnIiwic3RhdGUiLCJwbHVnaW5zIiwic3luYyIsImJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucyIsImFmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zIiwiYmVmb3JlUHJlcGFyZVJvdXRlcyIsImdldFJvdXRlcyIsInJvdXRlcyIsIm5vcm1hbGl6ZVJvdXRlIiwicm91dGUiLCJhZnRlclByZXBhcmVSb3V0ZXMiLCJ3ZWJwYWNrIiwiY29uZmlnIiwiYWZ0ZXJCdW5kbGUiLCJhZnRlckRldlNlcnZlclN0YXJ0IiwiYmVmb3JlUmVuZGVyVG9FbGVtZW50IiwiQ29tcCIsImJlZm9yZVJlbmRlclRvSHRtbCIsImVsZW1lbnQiLCJodG1sUHJvcHMiLCJwcm9wcyIsImhlYWRFbGVtZW50cyIsImVsZW1lbnRzIiwiYmVmb3JlSHRtbFRvRG9jdW1lbnQiLCJodG1sIiwiYmVmb3JlRG9jdW1lbnRUb0ZpbGUiLCJhZnRlckV4cG9ydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLElBQU1BLGNBQWMsR0FBRyxDQUNyQixnQkFEcUIsRUFFckIsNkJBRnFCLEVBR3JCLDRCQUhxQixFQUlyQixxQkFKcUIsRUFLckIsV0FMcUIsRUFNckIsZ0JBTnFCLEVBT3JCLG9CQVBxQixFQVFyQixTQVJxQixFQVNyQixhQVRxQixFQVVyQixxQkFWcUIsRUFXckIsdUJBWHFCLEVBWXJCLG9CQVpxQixFQWFyQixXQWJxQixFQWNyQixjQWRxQixFQWVyQixzQkFmcUIsRUFnQnJCLHNCQWhCcUIsRUFpQnJCLGFBakJxQixDQUF2Qjs7QUFvQk8sSUFBTUMsY0FBYyxHQUFHLFNBQWpCQSxjQUFpQixDQUFBQyxNQUFNLEVBQUk7QUFDdEMsTUFBTUMsUUFBUSxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWUgsTUFBTSxDQUFDSSxLQUFuQixDQUFqQjtBQUNBLE1BQU1DLE9BQU8sR0FBR0osUUFBUSxDQUFDSyxNQUFULENBQWdCLFVBQUFDLEdBQUc7QUFBQSxXQUFJLENBQUNULGNBQWMsQ0FBQ1UsUUFBZixDQUF3QkQsR0FBeEIsQ0FBTDtBQUFBLEdBQW5CLENBQWhCOztBQUNBLE1BQUlGLE9BQU8sQ0FBQ0ksTUFBWixFQUFvQjtBQUNsQixVQUFNLElBQUlDLEtBQUosbUNBQ3NCTCxPQUFPLENBQUNNLElBQVIsQ0FBYSxJQUFiLENBRHRCLGlDQUVGWCxNQUFNLENBQUNZLFFBRkwsRUFBTjtBQUtEO0FBQ0YsQ0FWTTs7O2VBWVE7QUFDYkMsRUFBQUEsY0FBYyxFQUFFLHdCQUFBQyxLQUFLLEVBQUk7QUFDdkIsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IsZ0JBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CO0FBQUVZLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQW5CLEVBQW1DRixLQUFuQyxDQUFQO0FBQ0QsR0FKWTtBQUtiRyxFQUFBQSwyQkFBMkIsRUFBRSxxQ0FBQUgsS0FBSyxFQUFJO0FBQ3BDLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLDZCQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQlUsS0FBbkIsQ0FBUDtBQUNELEdBUlk7QUFTYkksRUFBQUEsMEJBQTBCLEVBQUUsb0NBQUFKLEtBQUssRUFBSTtBQUNuQyxRQUFNVixLQUFLLEdBQUcscUJBQVNVLEtBQUssQ0FBQ0MsT0FBZixFQUF3Qiw0QkFBeEIsQ0FBZDtBQUNBLFdBQU8sd0JBQVlYLEtBQVosRUFBbUJVLEtBQW5CLENBQVA7QUFDRCxHQVpZO0FBYWJLLEVBQUFBLG1CQUFtQixFQUFFLDZCQUFBTCxLQUFLLEVBQUk7QUFDNUIsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IscUJBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CVSxLQUFuQixDQUFQO0FBQ0QsR0FoQlk7QUFpQmJNLEVBQUFBLFNBQVMsRUFBRSxtQkFBQ0MsTUFBRCxFQUFTUCxLQUFULEVBQW1CO0FBQzVCLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLFdBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CaUIsTUFBbkIsRUFBMkJQLEtBQTNCLENBQVA7QUFDRCxHQXBCWTtBQXFCYlEsRUFBQUEsY0FBYyxFQUFFLHdCQUFBUixLQUFLLEVBQUk7QUFDdkIsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IsZ0JBQXhCLENBQWQ7QUFDQSxXQUFPLFVBQUFRLEtBQUs7QUFBQSxhQUFJLHdCQUFZbkIsS0FBWixFQUFtQjtBQUFFWSxRQUFBQSxJQUFJLEVBQUU7QUFBUixPQUFuQixFQUFtQ08sS0FBbkMsRUFBMENULEtBQTFDLENBQUo7QUFBQSxLQUFaO0FBQ0QsR0F4Qlk7QUF5QmJVLEVBQUFBLGtCQUFrQixFQUFFLDRCQUFBVixLQUFLLEVBQUk7QUFDM0IsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0Isb0JBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CVSxLQUFuQixDQUFQO0FBQ0QsR0E1Qlk7QUE2QmJXLEVBQUFBLE9BQU8sRUFBRSxpQkFBQ0MsTUFBRCxFQUFTWixLQUFULEVBQW1CO0FBQzFCLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLFNBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1CO0FBQUVZLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQW5CLEVBQW1DVSxNQUFuQyxFQUEyQ1osS0FBM0MsQ0FBUDtBQUNELEdBaENZO0FBaUNiYSxFQUFBQSxXQUFXLEVBQUUscUJBQUFiLEtBQUssRUFBSTtBQUNwQixRQUFNVixLQUFLLEdBQUcscUJBQVNVLEtBQUssQ0FBQ0MsT0FBZixFQUF3QixhQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQlUsS0FBbkIsQ0FBUDtBQUNELEdBcENZO0FBcUNiYyxFQUFBQSxtQkFBbUIsRUFBRSw2QkFBQWQsS0FBSyxFQUFJO0FBQzVCLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLHFCQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQlUsS0FBbkIsQ0FBUDtBQUNELEdBeENZO0FBeUNiZSxFQUFBQSxxQkFBcUIsRUFBRSwrQkFBQ0MsSUFBRCxFQUFPaEIsS0FBUCxFQUFpQjtBQUN0QyxRQUFNVixLQUFLLEdBQUcscUJBQVNVLEtBQUssQ0FBQ0MsT0FBZixFQUF3Qix1QkFBeEIsQ0FBZDtBQUNBLFdBQU8sd0JBQVlYLEtBQVosRUFBbUIwQixJQUFuQixFQUF5QmhCLEtBQXpCLENBQVA7QUFDRCxHQTVDWTtBQTZDYmlCLEVBQUFBLGtCQUFrQixFQUFFLDRCQUFDQyxPQUFELEVBQVVsQixLQUFWLEVBQW9CO0FBQ3RDLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLG9CQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQjRCLE9BQW5CLEVBQTRCbEIsS0FBNUIsQ0FBUDtBQUNELEdBaERZO0FBaURibUIsRUFBQUEsU0FBUyxFQUFFLG1CQUFDQyxLQUFELEVBQVFwQixLQUFSLEVBQWtCO0FBQzNCLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLFdBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1COEIsS0FBbkIsRUFBMEJwQixLQUExQixDQUFQO0FBQ0QsR0FwRFk7QUFxRGJxQixFQUFBQSxZQUFZLEVBQUUsc0JBQUNDLFFBQUQsRUFBV3RCLEtBQVgsRUFBcUI7QUFDakMsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IsY0FBeEIsQ0FBZDtBQUNBLFdBQU8sd0JBQVlYLEtBQVosRUFBbUJnQyxRQUFuQixFQUE2QnRCLEtBQTdCLENBQVA7QUFDRCxHQXhEWTtBQXlEYnVCLEVBQUFBLG9CQUFvQixFQUFFLDhCQUFDQyxJQUFELEVBQU94QixLQUFQLEVBQWlCO0FBQ3JDLFFBQU1WLEtBQUssR0FBRyxxQkFBU1UsS0FBSyxDQUFDQyxPQUFmLEVBQXdCLHNCQUF4QixDQUFkO0FBQ0EsV0FBTyx3QkFBWVgsS0FBWixFQUFtQmtDLElBQW5CLEVBQXlCeEIsS0FBekIsQ0FBUDtBQUNELEdBNURZO0FBNkRieUIsRUFBQUEsb0JBQW9CLEVBQUUsOEJBQUNELElBQUQsRUFBT3hCLEtBQVAsRUFBaUI7QUFDckMsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0Isc0JBQXhCLENBQWQ7QUFDQSxXQUFPLHdCQUFZWCxLQUFaLEVBQW1Ca0MsSUFBbkIsRUFBeUJ4QixLQUF6QixDQUFQO0FBQ0QsR0FoRVk7QUFpRWIwQixFQUFBQSxXQUFXLEVBQUUscUJBQUExQixLQUFLLEVBQUk7QUFDcEIsUUFBTVYsS0FBSyxHQUFHLHFCQUFTVSxLQUFLLENBQUNDLE9BQWYsRUFBd0IsYUFBeEIsQ0FBZDtBQUNBLFdBQU8sd0JBQVlYLEtBQVosRUFBbUJVLEtBQW5CLENBQVA7QUFDRDtBQXBFWSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0SG9va3MsIHJlZHVjZUhvb2tzIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmNvbnN0IHN1cHBvcnRlZEhvb2tzID0gW1xuICAnYWZ0ZXJHZXRDb25maWcnLFxuICAnYmVmb3JlUHJlcGFyZUJyb3dzZXJQbHVnaW5zJyxcbiAgJ2FmdGVyUHJlcGFyZUJyb3dzZXJQbHVnaW5zJyxcbiAgJ2JlZm9yZVByZXBhcmVSb3V0ZXMnLFxuICAnZ2V0Um91dGVzJyxcbiAgJ25vcm1hbGl6ZVJvdXRlJyxcbiAgJ2FmdGVyUHJlcGFyZVJvdXRlcycsXG4gICd3ZWJwYWNrJyxcbiAgJ2FmdGVyQnVuZGxlJyxcbiAgJ2FmdGVyRGV2U2VydmVyU3RhcnQnLFxuICAnYmVmb3JlUmVuZGVyVG9FbGVtZW50JyxcbiAgJ2JlZm9yZVJlbmRlclRvSHRtbCcsXG4gICdodG1sUHJvcHMnLFxuICAnaGVhZEVsZW1lbnRzJyxcbiAgJ2JlZm9yZUh0bWxUb0RvY3VtZW50JyxcbiAgJ2JlZm9yZURvY3VtZW50VG9GaWxlJyxcbiAgJ2FmdGVyRXhwb3J0Jyxcbl1cblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlUGx1Z2luID0gcGx1Z2luID0+IHtcbiAgY29uc3QgaG9va0tleXMgPSBPYmplY3Qua2V5cyhwbHVnaW4uaG9va3MpXG4gIGNvbnN0IGJhZEtleXMgPSBob29rS2V5cy5maWx0ZXIoa2V5ID0+ICFzdXBwb3J0ZWRIb29rcy5pbmNsdWRlcyhrZXkpKVxuICBpZiAoYmFkS2V5cy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5rbm93biBwbHVnaW4gaG9va3M6IFwiJHtiYWRLZXlzLmpvaW4oJywgJyl9XCIgZm91bmQgaW4gcGx1Z2luOiAke1xuICAgICAgICBwbHVnaW4ubG9jYXRpb25cbiAgICAgIH1gXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYWZ0ZXJHZXRDb25maWc6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlckdldENvbmZpZycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkoc3RhdGUpXG4gIH0sXG4gIGJlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2luczogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVByZXBhcmVCcm93c2VyUGx1Z2lucycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcbiAgfSxcbiAgYWZ0ZXJQcmVwYXJlQnJvd3NlclBsdWdpbnM6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlclByZXBhcmVCcm93c2VyUGx1Z2lucycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcbiAgfSxcbiAgYmVmb3JlUHJlcGFyZVJvdXRlczogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVByZXBhcmVSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIGdldFJvdXRlczogKHJvdXRlcywgc3RhdGUpID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdnZXRSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykocm91dGVzLCBzdGF0ZSlcbiAgfSxcbiAgbm9ybWFsaXplUm91dGU6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdub3JtYWxpemVSb3V0ZScpXG4gICAgcmV0dXJuIHJvdXRlID0+IHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkocm91dGUsIHN0YXRlKVxuICB9LFxuICBhZnRlclByZXBhcmVSb3V0ZXM6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlclByZXBhcmVSb3V0ZXMnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIHdlYnBhY2s6IChjb25maWcsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnd2VicGFjaycpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzLCB7IHN5bmM6IHRydWUgfSkoY29uZmlnLCBzdGF0ZSlcbiAgfSxcbiAgYWZ0ZXJCdW5kbGU6IHN0YXRlID0+IHtcbiAgICBjb25zdCBob29rcyA9IGdldEhvb2tzKHN0YXRlLnBsdWdpbnMsICdhZnRlckJ1bmRsZScpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShzdGF0ZSlcbiAgfSxcbiAgYWZ0ZXJEZXZTZXJ2ZXJTdGFydDogc3RhdGUgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2FmdGVyRGV2U2VydmVyU3RhcnQnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG4gIGJlZm9yZVJlbmRlclRvRWxlbWVudDogKENvbXAsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlUmVuZGVyVG9FbGVtZW50JylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKENvbXAsIHN0YXRlKVxuICB9LFxuICBiZWZvcmVSZW5kZXJUb0h0bWw6IChlbGVtZW50LCBzdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZVJlbmRlclRvSHRtbCcpXG4gICAgcmV0dXJuIHJlZHVjZUhvb2tzKGhvb2tzKShlbGVtZW50LCBzdGF0ZSlcbiAgfSxcbiAgaHRtbFByb3BzOiAocHJvcHMsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnaHRtbFByb3BzJylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKHByb3BzLCBzdGF0ZSlcbiAgfSxcbiAgaGVhZEVsZW1lbnRzOiAoZWxlbWVudHMsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnaGVhZEVsZW1lbnRzJylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKGVsZW1lbnRzLCBzdGF0ZSlcbiAgfSxcbiAgYmVmb3JlSHRtbFRvRG9jdW1lbnQ6IChodG1sLCBzdGF0ZSkgPT4ge1xuICAgIGNvbnN0IGhvb2tzID0gZ2V0SG9va3Moc3RhdGUucGx1Z2lucywgJ2JlZm9yZUh0bWxUb0RvY3VtZW50JylcbiAgICByZXR1cm4gcmVkdWNlSG9va3MoaG9va3MpKGh0bWwsIHN0YXRlKVxuICB9LFxuICBiZWZvcmVEb2N1bWVudFRvRmlsZTogKGh0bWwsIHN0YXRlKSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYmVmb3JlRG9jdW1lbnRUb0ZpbGUnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoaHRtbCwgc3RhdGUpXG4gIH0sXG4gIGFmdGVyRXhwb3J0OiBzdGF0ZSA9PiB7XG4gICAgY29uc3QgaG9va3MgPSBnZXRIb29rcyhzdGF0ZS5wbHVnaW5zLCAnYWZ0ZXJFeHBvcnQnKVxuICAgIHJldHVybiByZWR1Y2VIb29rcyhob29rcykoc3RhdGUpXG4gIH0sXG59XG4iXX0=